<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">

<head th:insert="fragments/head::head">
</head>

<body>
	<header th:insert="fragments/header::navbar"></header>
	<div class="separator-50"></div>
	<div class="container">
		<div class="row mx-auto">
			<div class="col-md-12 mx-auto">
				<div class="card shadow">
					<div class="card-body">
						<div class="row">
							<div class="col-md-12">
								<h2 class="py-4 mt-4 text-center" th:text="${title}"></h2>
							</div>
						</div>
						<div class="row">
							<div class="col-md-12">
								<div class="card shadow">
									<div class="card-body">
										<form action="/registros/add" th:action="@{/registros/add}"
											th:method="post" th:object="${RegistroModelo}">
											<h2 class="pb-4">Ingresar Nuevo Accidente</h2>

											<div class="form-group row">
												<div class="col-12 col-md-12">
													<label>Persona:</label> <br>
													<!-- <div class="btn-group btn-group-toggle pb-2"
														data-toggle="buttons">
														<label class="btn btn-success active"> <input
															type="radio" name="options" id="option1"
															autocomplete="off" checked> Existe
														</label> <label class="btn btn-warning"> <input
															type="radio" name="options" id="option2"
															autocomplete="off"> Nueva
														</label>
													</div> 
													<input name="persona_id" class="form-control"
														th:field="*{persona}" id="rutInput"
														placeholder="Ingrese persona a buscar">
													<h3 id="nameOutput"></h3>
													-->
													<span>Asignando id 13 para preba</span>
													<input type="text" class="form-control" name="persona_id" th:field="*{persona}"
												th:value="13" >

													
												</div>
											</div>
											<div class="form-group row">
												<div class="col-12">
													<label for="">Tipo Accidente:</label> <select
														class="form-control" name="tipoRegistro"
														th:field="*{tipoAccidente}">
														<option value="" disabled>Seleccione una opcion</option>
														<option th:each="item : ${tiposAccidentes}"
															th:value="${item.id}" th:text="${item.tAccidente}">
														</option>
													</select>
												</div>
											</div>
												 <input name="user_id" type="text" th:value="1"  th:field="*{user}"/>
											<div class="form-group row">
												<div class="col-md-12">
													<label for="">Profesi&oacute;n / Actividad:</label> <input
														type="text" name="cargo" class="form-control">
												</div>

											</div>
											<div class="form-group row">
												<div class="col-md-12">
													<label for="">Fecha Accidente:</label> <input type="date"
														name="fecha" class="form-control ">
												</div>
											</div>

											<div class="form-group row">
												<div class="col-md-12">
													<label for="name">Descripcion del accidente:</label>
													<textarea class="md-textarea form-control"
														name="Descripcion" rows="2">
													</textarea>
												</div>
											</div>


											<div class="form-group row">
												<div class="col-12">
													<label for="">Asignar Profesional:</label> <select
														class="form-control" name="profesional"
														th:field="*{profesional}">
														<option value="" disabled>Seleccione una opcion</option>
														<option th:each="item : ${profesionales}"
															th:value="${item.id}"
															th:text="${item.personaaa.nombre} +' ' +  ${item.personaaa.apellido}">
														</option>
													</select>
												</div>
											</div>



											<div class="form-group row ">
												<div class="col-md-7 ">
													<button class="btn btn-primary btn-lg " name="submit"
														value="Agregar Accidente" type="submit">Guardar
														Registro</button>
												</div>

												<a href="verAccidente.jsp">
													<div class="col-md-2 ">
														<button class="btn btn-primary btn-lg " type="button">Regresar</button>
													</div>
												</a>

												<div class="col-md-1 ">
													<button class="btn btn-primary btn-lg " type="reset">limpiar</button>
												</div>
											</div>
										</form>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>

	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>

	<script
		src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.16.1/umd/popper.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.5.0/js/bootstrap.min.js"></script>
	<script
		src="https://cdn.datatables.net/1.10.21/js/jquery.dataTables.min.js"></script>
	<script
		src="https://cdn.datatables.net/1.10.21/js/dataTables.bootstrap4.min.js"></script>
	<script
		src="https://cdnjs.cloudflare.com/ajax/libs/limonte-sweetalert2/8.11.8/sweetalert2.min.js"
		charset="UTF-8">
		
	</script>

	<script th:inline="javascript">
		$(document).ready(
				function() {
					/*<![CDATA[*/

					/*[# th:each="persona : ${personas}"]*/

					var personaRut = /*[[${persona.rut}]]*/'noValue';
					if(personaRut){
						
					}else{
						console.log(personaRut)
					}
					

					$("#rutInput").autocomplete(
							{

								minLength : 1,
								source : personaRut,
								select : function(e, ui) {
									$("#rutOutput").text(
											'You have selected : '
													+ ui.item.value);
									return ui.item.value;
								}
							})

					console.log(personaRut)

					/*[/]*/

					/*]]>*/

				});
	</script>
</body>
</html>